<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PenaltÄ± - CapyOS</title>
    <style>
        :root { 
            --ios-blue: #007aff; 
            --ios-bg: #f2f2f7; 
            --ios-card-bg: white;
            --ios-dark-text: #1c1c1e;
            --ios-light-text: #8e8e93;
            --ios-separator: #d1d1d6;
        }
        body { 
            font-family: -apple-system, sans-serif; 
            background: var(--ios-bg); 
            margin: 0; 
            padding-bottom: 70px; 
            -webkit-font-smoothing: antialiased;
        }
        
        /* Ãœst BaÅŸlÄ±k */
        .header { 
            background: var(--ios-card-bg); 
            padding: 50px 20px 15px; 
            border-bottom: 0.5px solid var(--ios-separator); 
            position: sticky; top: 0; z-index: 100; 
            box-shadow: 0 1px 0 rgba(0,0,0,0.05); /* Hafif gÃ¶lge */
        }
        .header h1 { margin: 0; font-size: 32px; letter-spacing: -1px; color: var(--ios-dark-text); }
        .header .subtitle { font-size: 14px; color: var(--ios-light-text); margin-top: 5px; }

        /* Ä°Ã§erik AlanlarÄ± */
        .page { display: none; padding: 15px; }
        .active-page { display: block; }

        /* MaÃ§ KartlarÄ± */
        .match-card { 
            background: var(--ios-card-bg); 
            border-radius: 12px; 
            padding: 15px; 
            margin-bottom: 10px; 
            display: flex; 
            flex-direction: column; /* GÃ¶rsel odaklÄ± */
            align-items: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08); /* Daha belirgin gÃ¶lge */
            transition: transform 0.2s ease-out;
            text-decoration: none;
            color: var(--ios-dark-text);
        }
        .match-card:active { transform: scale(0.98); }

        .team-logos { display: flex; align-items: center; margin-bottom: 10px; width: 100%; justify-content: space-around; }
        .team { text-align: center; flex: 1; }
        .team-name { font-weight: 600; font-size: 16px; margin-top: 5px; }
        .score { font-size: 28px; font-weight: bold; color: var(--ios-blue); margin: 0 10px; }
        .logo { width: 50px; height: 50px; object-fit: contain; }

        .match-status { 
            background: #ff3b30; color: white; padding: 4px 10px; 
            border-radius: 8px; font-size: 12px; font-weight: bold; margin-bottom: 10px; 
            animation: pulse 1.5s infinite; /* CanlÄ± vurgusu */
        }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }

        .watch-btn { 
            background: var(--ios-blue); color: white; text-decoration: none; 
            padding: 10px 20px; border-radius: 10px; font-size: 15px; font-weight: 600;
            width: calc(100% - 30px); text-align: center; margin-top: 10px;
        }

        /* Puan Durumu iframe */
        .puan-tablo { width: 100%; height: 600px; border: none; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }

        /* Alt Tab Bar */
        .tab-bar { 
            position: fixed; bottom: 0; width: 100%; 
            background: rgba(255,255,255,0.9); backdrop-filter: blur(10px); 
            display: flex; justify-content: space-around; 
            padding: 10px 0 25px; 
            border-top: 0.5px solid var(--ios-separator);
            box-shadow: 0 -1px 0 rgba(0,0,0,0.05);
        }
        .tab-item { 
            border: none; background: none; color: var(--ios-light-text); 
            cursor: pointer; display: flex; flex-direction: column; 
            align-items: center; font-size: 10px; 
            transition: color 0.2s ease-out;
        }
        .tab-item.active { color: var(--ios-blue); }
        .tab-icon { font-size: 20px; margin-bottom: 3px; }
        #loader { text-align: center; padding: 20px; color: var(--ios-light-text); }
    </style>
</head>
<body>

<div class="header">
    <h1 id="page-title">CanlÄ± MaÃ§lar</h1>
    <div class="subtitle">CapyOS PenaltÄ±</div>
</div>

<div id="canli-maclar" class="page active-page">
    <div id="loader" style="text-align:center; padding:20px;">CanlÄ± maÃ§lar Google'dan Ã§ekiliyor...</div>
    <div id="matchList">
        </div>
</div>

<div id="puan-durumu" class="page">
    <div style="padding: 15px;">
        <p style="font-size: 14px; color: var(--ios-light-text);">SÃ¼per Lig GÃ¼ncel Puan Durumu</p>
        <a href="https://www.google.com/search?q=sÃ¼per+lig+puan+durumu" target="_blank" class="watch-btn" style="background:#34c759; margin-bottom:15px;">Google'dan Tam Ekran GÃ¶r</a>
        <iframe class="puan-tablo" src="https://www.bing.com/search?q=sÃ¼per+lig+puan+durumu"></iframe>
    </div>
</div>

<nav class="tab-bar">
    <button class="tab-item active" onclick="showPage('canli-maclar', 'CanlÄ± MaÃ§lar', this)">
        <span class="tab-icon">âš½</span>
        <span>MaÃ§lar</span>
    </button>
    <button class="tab-item" onclick="showPage('puan-durumu', 'Puan Durumu', this)">
        <span class="tab-icon">ðŸ“Š</span>
        <span>Puan</span>
    </button>
</nav>

<script>
    function showPage(pageId, title, btn) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
        document.getElementById(pageId).classList.add('active-page');
        document.getElementById('page-title').innerText = title;
        document.querySelectorAll('.tab-item').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
    }

    // MaÃ§lar iÃ§in gÃ¶rsel Ã§ekme ve gÃ¶sterme fonksiyonu
    async function fetchLiveMatches() {
        const list = document.getElementById('matchList');
        const loader = document.getElementById('loader');
        
        // Google Haberler RSS'i kullanÄ±yoruz, bÃ¶ylece "canlÄ±" kelimesi iÃ§eren manÅŸetleri Ã§ekeriz
        const feedUrl = "https://news.google.com/rss/search?q=canlÄ±+maÃ§+skoru+izle&hl=tr&gl=TR&ceid=TR:tr";
        const proxyUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(feedUrl)}`;

        try {
            const res = await fetch(proxyUrl);
            const data = await res.json();
            loader.style.display = 'none';
            
            if (data.status === 'ok' && data.items.length > 0) {
                // Ä°lk 5-7 maÃ§Ä± listele
                data.items.slice(0, 7).forEach(item => {
                    const title = item.title.split(' - ')[0].trim(); // BaÅŸlÄ±ktan takÄ±m isimlerini ayÄ±kla
                    // TakÄ±m isimlerini ve skorlarÄ± tahmin etmeye Ã§alÄ±ÅŸ
                    let team1 = "TakÄ±m 1";
                    let team2 = "TakÄ±m 2";
                    let score = "CANLI";
                    let matchTime = ""; // HenÃ¼z tahmin edemiyoruz, varsayÄ±lan

                    // Basit bir regex ile takÄ±m ve skor tahmini
                    const scoreMatch = title.match(/(\d+)\s*-\s*(\d+)/);
                    if (scoreMatch) {
                        score = `${scoreMatch[1]} - ${scoreMatch[2]}`;
                        const teams = title.replace(scoreMatch[0], '').split('vs').map(s => s.trim()).filter(Boolean);
                        if (teams.length >= 2) {
                            team1 = teams[0];
                            team2 = teams[1];
                        } else { // EÄŸer vs yoksa ve skor varsa, baÅŸlÄ±ÄŸÄ± takÄ±m olarak kullan
                            const parts = title.split(' ');
                            if(parts.length > 2) {
                                team1 = parts[0];
                                team2 = parts[parts.length - 1];
                            }
                        }
                    } else { // Skor yoksa, sadece takÄ±m isimlerini tahmin etmeye Ã§alÄ±ÅŸ
                        const teams = title.split(' vs ').map(s => s.trim()).filter(Boolean);
                        if (teams.length >= 2) {
                            team1 = teams[0];
                            team2 = teams[1];
                        } else { // Ã‡ok genel bir baÅŸlÄ±k ise ilk kelimeleri al
                            const parts = title.split(' ');
                            if (parts.length > 1) {
                                team1 = parts[0];
                                team2 = parts[1];
                            }
                        }
                        score = "CanlÄ± Skor"; // EÄŸer skor Ã§ekilemezse varsayÄ±lan
                    }

                    // Basit logo URL'leri (gerÃ§ek logolar iÃ§in API gerekir, bu sadece Ã¶rnek)
                    const getLogoUrl = (teamName) => {
                        const baseUrl = "https://www.google.com/s2/favicons?domain=";
                        if (teamName.includes("Galatasaray")) return baseUrl + "galatasaray.org";
                        if (teamName.includes("FenerbahÃ§e")) return baseUrl + "fenerbahce.org";
                        if (teamName.includes("BeÅŸiktaÅŸ")) return baseUrl + "bjk.com.tr";
                        if (teamName.includes("Trabzonspor")) return baseUrl + "trabzonspor.org.tr";
                        return "https://via.placeholder.com/50/eeeeee/aaaaaa?text=âš½"; // VarsayÄ±lan logo
                    };

                    const selcukLink = `https://www.google.com/search?q=${team1}+${team2}+maÃ§Ä±+selcuksports+izle`;

                    list.innerHTML += `
                        <a href="${selcukLink}" target="_blank" class="match-card">
                            <div class="match-status">${score} ${matchTime}</div>
                            <div class="team-logos">
                                <div class="team">
                                    <img src="${getLogoUrl(team1)}" alt="${team1}" class="logo">
                                    <span class="team-name">${team1}</span>
                                </div>
                                <span class="score">-</span>
                                <div class="team">
                                    <img src="${getLogoUrl(team2)}" alt="${team2}" class="logo">
                                    <span class="team-name">${team2}</span>
                                </div>
                            </div>
                            <span class="watch-btn">MaÃ§Ä± SelÃ§uksports'tan Ä°zle</span>
                        </a>
                    `;
                });
            } else {
                list.innerHTML = `<p style="text-align:center; color:var(--ios-light-text);">Åžu an canlÄ± maÃ§ bulunamadÄ± kanka. <br>Birazdan tekrar dene!</p>`;
            }
        } catch (e) {
            loader.innerText = "MaÃ§larÄ± Ã§ekerken bir sorun oluÅŸtu kanka. SayfayÄ± yenilemeyi dene.";
            console.error(e);
        }
    }

    fetchLiveMatches();
</script>

</body>
</html>
